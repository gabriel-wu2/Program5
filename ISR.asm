; ISR.asm
; Name: Gabriel Wu
; UTEid: gxw58
; Keyboard ISR runs when a key is struck
; Checks for a valid RNA symbol and places it at x4600
               .ORIG x2600
LOOP LDI R0, KBSR
BRZP LOOP
LDI R0, KBDR
LD R1, ASCIIA
NOT R1, R1
ADD R1, R1, #1
ADD R1, R1, R0
BRZ DONE
LD R1, ASCIIC
NOT R1, R1
ADD R1, R1, #1
ADD R1, R1, R0
BRZ DONE
LD R1, ASCIIG
NOT R1, R1
ADD R1, R1, #1
ADD R1, R1, R0
BRZ DONE
LD R1, ASCIIU
NOT R1, R1
ADD R1, R1, #1
ADD R1, R1, R0
BRZ DONE
BRNZP 1
DONE STI R0, MAIN
RTI

KBDR .FILL xFE02
KBSR .FILL xFE00
ASCIIA .FILL x0041
ASCIIC .FILL x0043
ASCIIG .FILL x0047
ASCIIU .FILL x0055
MAIN .FILL x4600
		.END
